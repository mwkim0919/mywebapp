{% load custom_tags %}

<html lang="eng">

    <head>
        <title>All About Vancouver</title>
        <meta charset="utf-8">
        <style>
			#map-canvas {
				width: 100%;
				height: 50%;
			}
	    </style>
	    <script src="https://maps.googleapis.com/maps/api/js"></script>
	    <script>
		function initialize() {
			var mapCanvas = document.getElementById('map-canvas');
			var mapOptions = {
				center: new google.maps.LatLng(49.2402, -123.1138),
				zoom: 11,
				mapTypeId: google.maps.MapTypeId.ROADMAP
			}
			var map = new google.maps.Map(mapCanvas, mapOptions)

			var trafficLayer = new google.maps.TrafficLayer();
			trafficLayer.setMap(map);
		}
		google.maps.event.addDomListener(window, 'load', initialize);
		</script>
    </head>

    <body>
		<h1>Welcome to All About Vancouver</h1>

		<div class="search">
			<form action="/search/" method"GET">
				<label>SEARCH: </label>
				<select name="query_type">
					<option value="Park">Park</option>
					<option value="Facility">Facility</option>
				</select>
				<input type="text" name="query_string" id="query_string"/>
			</form>
		</div>

		<p>
		{% if query_string %}
			*Showing parks containing {{ query_type }} "{{ query_string }}"
		{% endif %}
		</p>
		
	    <div id="map-canvas"></div>

	    <script>
    	function getParks() {
    		"{% for Park in Parks %}"
    			var Park = [];
    			Park.push("{{ Park.pName }}");
    			Park.push("{{ Park.lat }}");
    			Park.push("{{ Park.lon }}");

    			Parks.push(Park);
    		"{% endfor %}"
    	}
    	</script>

		<div class="col-md-7">
			{% block content %}
			<table class="table table-responsive" id="list">
				<thead>
					<th>Park</th>
					<th>Address</th>
					<th>Facility(#)</th>
					<!-- <th>#</th> -->
				</thead>
				<tbody>
					{% for pID in parkIDs %}
						<tr>
							<td>{{ names|get_value:pID }}</td>
							<td>{{ streetNumbers|get_value:pID }} {{ streetNames|get_value:pID }} Vancouver, BC</td>
							<td>
							{% for facility in facilities|get_value:pID %}
								<li>{{ facility }}</li>
							{% endfor %}
							</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>
			{% endblock %}
		</div>
	</body>

</html>